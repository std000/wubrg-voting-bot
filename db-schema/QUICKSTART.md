# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ö–µ–º—ã –ë–î

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL –∏ —Å–æ–∑–¥–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ PostgreSQL
psql -U postgres

# –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞)
CREATE DATABASE wubrg_voting;

# –í—ã—Ö–æ–¥–∏–º
\q
```

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ö–µ–º—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
cd /Users/alexkarpukhin/GolandProjects/wubrg-voting-bot

# –°–æ–∑–¥–∞–µ–º —Å—Ö–µ–º—É
psql -U postgres -d wubrg_voting -f db-schema/schema.sql

# (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
psql -U postgres -d wubrg_voting -f db-schema/sample_data.sql
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é psql

```bash
psql -U postgres -d wubrg_voting

# –í–Ω—É—Ç—Ä–∏ psql:
\i db-schema/schema.sql
\i db-schema/sample_data.sql

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—ã:
\dt

# –í—ã—Ö–æ–¥–∏–º:
\q
```

## 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞
psql -U postgres -d wubrg_voting -c "SELECT schema_name FROM information_schema.schemata WHERE schema_name = 'voting';"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—ã –≤ —Å—Ö–µ–º–µ voting
psql -U postgres -d wubrg_voting -c "SELECT COUNT(*) FROM voting.polls;"
```

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ö–µ–º—É `voting` –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ polls.

## 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
psql -U postgres -d wubrg_voting -f db-schema/queries.sql
```

## 5. –°–±—Ä–æ—Å —Å—Ö–µ–º—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É:

```bash
# –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
psql -U postgres -d wubrg_voting -f db-schema/drop_tables.sql

# –°–æ–∑–¥–∞–µ–º –∑–∞–Ω–æ–≤–æ
psql -U postgres -d wubrg_voting -f db-schema/schema.sql
```

## 6. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ Go

–í –≤–∞—à–µ–º `main.go` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

```go
ctx := context.Background()
db, err := pgx.Connect(ctx, databaseURL)
if err != nil {
    log.Fatalf("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: %v", err)
}
defer db.Close(ctx)

// –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —è–≤–Ω—ã–µ –ø—É—Ç–∏: voting.polls, voting.votes –∏ —Ç.–¥.
```

–ò –ø–µ—Ä–µ–¥–∞–π—Ç–µ `db` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–æ—Ç–∞:

```go
tgBot, err := bot.New(botToken, db)
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

- **schema.sql** - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î (CREATE TABLE)
- **drop_tables.sql** - —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- **sample_data.sql** - —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **queries.sql** - –ø–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- **schema_diagram.txt** - —Ç–µ–∫—Å—Ç–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- **schema.mmd** - Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- **README.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **QUICKSTART.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–µ –∑–∞–±—É–¥—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export DATABASE_URL="postgresql://postgres:postgres@localhost:5432/wubrg_voting"
export BOT_TOKEN="your_telegram_bot_token"
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –±–æ—Ç–æ–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π!

